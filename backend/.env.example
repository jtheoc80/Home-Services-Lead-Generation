
# Home Services Lead Generation - Backend Configuration
# Copy this file to .env and fill in your actual values

# ===== DATABASE CONFIGURATION =====
# PostgreSQL database connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://localhost/leadledger

# ===== APPLICATION SCOPE =====
# Geographic scope for launch (houston, texas, national)
LAUNCH_SCOPE=houston

# Default region slug for new accounts
DEFAULT_REGION=tx-houston

# Path to registry configuration file
REGISTRY_PATH=config/registry.yaml

# ===== SUPABASE CONFIGURATION =====
# Supabase project URL
SUPABASE_URL=https://wsbnbncapkrdovrrghlh.supabase.co

# Supabase service role key (for backend operations)
SUPABASE_SERVICE_ROLE=YOUR_SERVICE_ROLE_KEY_HERE

# ===== PERMIT DATA SOURCES =====
# Harris County Issued Permits API (Required for permit scraping)
HC_ISSUED_PERMITS_URL=https://www.gis.hctx.net/arcgishcpid/rest/services/Permits/IssuedPermits/FeatureServer/0

# ===== ACCESS CONTROL =====
# Whether to allow data exports (admin-only when true)

# Application Configuration
DEBUG=false
SECRET_KEY=your-secret-key-here
API_HOST=0.0.0.0
API_PORT=8000

# Lead Generation Settings
SAMPLE_DATA=0
DEFAULT_DAYS_LOOKBACK=30
MAX_RESULTS_PER_SOURCE=1000

# External API Keys (if needed)
# GOOGLE_MAPS_API_KEY=your_google_maps_api_key
# ACCELA_API_KEY=your_accela_api_key

# Data Storage Paths
DATA_OUTPUT_DIR=./data
PERMITS_DB_PATH=./data/permits/permits.db

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=./logs/backend.log

# Rate Limiting for Scrapers
SCRAPER_DELAY_SECONDS=1
SCRAPER_MAX_RETRIES=3
SCRAPER_TIMEOUT=30

# Feature Flags
ENABLE_LEAD_SCORING=true
ENABLE_DUPLICATE_DETECTION=true
ENABLE_DATA_EXPORT=true

# Export Control

ALLOW_EXPORTS=false

# ===== MACHINE LEARNING =====
# Whether to use ML for lead scoring
USE_ML_SCORING=false

# Minimum lead score threshold for notifications (0-100)
MIN_SCORE_THRESHOLD=70.0

# ===== SCHEDULING =====
# Cron schedule for nightly scraping (UTC timezone)
CRON_SCRAPE_UTC=0 5 * * *

# ===== NOTIFICATION SERVICES =====
# SendGrid API key for email notifications
SENDGRID_API_KEY=

# Twilio credentials for SMS notifications
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# Number of notifications to process in each batch
NOTIFICATION_BATCH_SIZE=100

# ===== REDIS CONFIGURATION =====
# Redis URL for caching and job queues
# Format: rediss://default:<password>@<host>:<port> for TLS
REDIS_URL=rediss://default:<password>@<host>:<port>
USE_REDIS_QUEUE=false

# ===== ADMIN CONFIGURATION =====
# Comma-separated list of admin email addresses
ADMIN_EMAILS=admin@example.com

# ===== APPLICATION ENVIRONMENT =====
# Environment name (development, staging, production)
ENVIRONMENT=development

# Enable debug mode (true/false)
DEBUG=false

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ===== STRIPE CONFIGURATION =====
# Stripe secret key for server-side operations
STRIPE_SECRET_KEY=sk_test_xxx

# Stripe webhook endpoint secret for signature verification
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Stripe publishable key (for frontend only - will be exposed)
STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# Stripe price IDs for subscription plans
STRIPE_PRICE_STARTER_MONTHLY=price_xxx
STRIPE_PRICE_PRO_MONTHLY=price_xxx

# Stripe price ID for lead credit packs
STRIPE_PRICE_LEAD_CREDIT_PACK=price_xxx

# Optional: Stripe tax rate ID
STRIPE_TAX_RATE_ID=txr_xxx

# Billing flow URLs
BILLING_SUCCESS_URL=https://<vercel-domain>/billing/success
BILLING_CANCEL_URL=https://<vercel-domain>/billing/cancel

# Internal webhook authentication
INTERNAL_WEBHOOK_TOKEN=